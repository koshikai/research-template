# AIエージェント協調ガイド

このプロジェクトは、AIエージェントが「副操縦士」として参加することを前提に設計されています。

## エージェントへの指示の原則
エージェントに対して以下の振る舞いを期待することを、プロンプトや設定ファイル（`.cursorrules` 等）で伝えてください。

1. **型ヒントの徹底**: 新規に追加する関数には必ず型ヒントを付けるよう指示してください。これは `ty` による静的解析を助け、結果としてエージェント自身の正確性が向上します。
2. **GoogleスタイルのDocstring**: コードの意図を明確にするため、「関数の目的、引数の意味、戻り値、例外」をDocstringに記述させてください。
3. **コミットメッセージ**: 実験結果やコードの修正を行う際、何を変えたのかをわかりやすく記述させます（例: `feat: 新しい損失関数を追加、実験結果の収束が20%向上`）。
4. **出力の明確化**: 生成物は `outputs/` に集約し、保存先を明示させます。

## エージェントの作業フロー
1. **計画**: 修正や追加の前に、エージェントに `implementation_plan.md` を作らせ、ユーザーと合意を取らせます。
2. **実装と自動修正**: 実装後、必ず `uv run poe lint` を実行させ、スタイルを整えさせると同時に型チェックをパスさせます。
3. **検証**: 最後にテスト（`uv run poe test`）を実行し、すべてのチェックがパスすることを確認させます。
4. **日次レポート**: 実験後は `uv run poe daily-report --request <path>` を実行し、
   `docs/experiments/YYYY-MM-DD.md` にAIの考察を残させます。

## 指示テンプレート（短文）
```text
目的: 何を達成したいか
前提: 参照すべきファイル/制約
成功条件: 何が満たされれば完了か
出力: どのファイル/成果物を作るか
```

## 役割分担の指針
- **人間**: 研究の方向性、評価基準、優先順位の決定
- **AI**: 実装、検証、ログの整理、改善案の提示

## レビュー時の観点
- 変更点が `src/` に閉じているか
- 設定と成果物が `configs/` と `outputs/` に整理されているか
- 再実行可能性（`uv run` で再現できるか）

## 推奨ツール
- **Cursor**: `.cursorrules` を設置することで、プロジェクト固有のルールを常時エージェントに意識させることができます。
- **GitHub Copilot**: コードの断片的な補完に。
- **Antigravity (Google)**: 複雑なリサーチタスクや大規模なリファクタリングに。
