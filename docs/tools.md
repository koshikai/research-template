# ツール構成詳解

本テンプレートでは、パフォーマンスとAIとの親和性を考慮し、以下のAstral社製品をコアに据えています。

## 1. パッケージ・環境管理: `uv`
- **役割**: Pythonのインストール、仮想環境の作成、ライブラリ管理。
- **採用理由**: 
    - `pip` より圧倒的に高速。
    - `pyproject.toml` と `uv.lock` による一貫した管理。
    - `uv run` による、環境を意識させないスクリプト実行。

## 2. Linter & Formatter: `ruff`
- **役割**: コードスタイルの統一、バグの未然防止。
- **採用理由**:
    - Rust製で、数千ファイルのチェックも一瞬。
    - `flake8`, `isort`, `black` 等の機能を1つに統合。
    - AIエージェントが書いたコードの「崩れ」を自動即時修正。

## 3. 型チェック: `ty` (Red-Knot)
- **役割**: 静的型付けによるコードの安全性確保。
- **採用理由**:
    - Astral社が提供する最新の超高速型チェッカー。
    - AIエージェントは型情報があることで、より正確な補完と依存関係の把握が可能になります。
    - **ルール**: プロジェクト全体で `Strict` な型チェックを目指します。

## 4. ノートブック・可視化: `marimo`
- **役割**: 探索的データ分析、プロトタイピング、対話型ダッシュボード。
- **採用理由**:
    - リアクティブ実行による実行順序問題の解消。
    - 純粋なPythonファイルとして保存されるため、Gitとの親和性が極めて高い。
    - `uv` との強力な連携（サンドボックス実行など）。

## 5. タスクランナー: `poethepoet`
- **役割**: 複雑なコマンドのエイリアス管理、定型作業の自動化。
- **採用理由**:
    - `pyproject.toml` にタスク定義を統合できる。
    - `uv run poe [task]` の形式で、長いコマンドを短縮可能。

### 設定済みの主要タスク (poe)
| タスク | 指令 | 用途 |
|---|---|---|
| `exp` | `python scripts/run_experiment.py` | 実験の実行 |
| `edit` | `marimo edit notebooks/analysis_sample.py` | ノートブックの編集 |
| `app` | `marimo run ... --headless` | ノートブックをアプリとして実行 |
| `lint` | `ruff format ... && ruff check ...` | コード整形とチェック |
| `test` | `pytest` | テストの実行 |

## 設定方針
- 各ツールの設定は `pyproject.toml` に集約します。
- これにより、ツールごとの設定ファイルがルートディレクトリに溢れるのを防ぎます。
